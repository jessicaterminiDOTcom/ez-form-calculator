jQuery(document).ready(function(a){function c(b){var c=0;return a(b).find("input[data-element='numbers'], input[data-element='hidden'], input:checked, option:selected").each(function(b,d){var e=a(d).data("element"),f=a(d).parents(".ezfc-element");("numbers"==e||"hidden"==e||"radio"==e||"checkbox"==e)&&(f=a(d));var g=f.data("calculate_enabled"),h=f.data("calculate_operator"),i=f.data("calculate_target"),j=parseFloat(a(d).data("factor")),k=parseFloat(a(d).val());if(g&&0!=g){(!k||isNaN(k)||!j||isNaN(j))&&(j=0,k=0);var l=k;switch(a(d).data("element")){case"numbers":case"hidden":l=k*j}var m=a("#ezfc_element-"+i);if(h&&m.length>0){var n=parseFloat(m.val());if(!n||isNaN(n))return;switch(h){case"add":l+=n;break;case"subtract":l-=n;break;case"multiply":l*=n;break;case"divide":if(0==n)return;l/=n}}c+=l}}),c}var b=ezfc_vars.price_format?ezfc_vars.price_format:"0,0[.]00";numeral.defaultFormat(b),a(".ezfc-element-datepicker").datepicker(),a(".ezfc-form").each(function(){var d=a(this).data("currency"),e=d+" "+numeral(c(a(this))).format(b);a(this).find(".ezfc-price").text(e)}),a(".ezfc-element-fileupload").each(function(b,c){var d=a(this).parents(".ezfc-element"),e=a(d).find(".ezfc-upload-button");a(this).fileupload({dataType:"json",add:function(b,f){a(d).find(".ezfc-bar").css("width",0),a(d).find(".progress").addClass("active"),a(d).find(".ezfc-fileupload-message").text(""),e.click(function(){return""==a(c).val()?!1:(f.submit(),a(e).attr("disabled","disabled"),b.preventDefault(),!1)})},done:function(b,c){return c.result.error?(a(d).find(".ezfc-fileupload-message").text(c.result.error),a(d).find(".ezfc-bar").css("width",0),!1):(a(this).attr("multiple")&&(a(this).val(""),a(e).removeAttr("disabled")),a(d).find(".progress").removeClass("active"),a(d).find(".ezfc-fileupload-message").text(ezfc_vars.upload_success),void 0)},progressall:function(b,c){var e=parseInt(100*(c.loaded/c.total),10);a(d).find(".ezfc-bar").css("width",e+"%")},replaceFileInput:!1,url:ezfc_ajaxurl_fileupload})}),a(".ezfc-form input, .ezfc-form select").on("change keyup",function(){var d=a(this).parents(".ezfc-form"),e=a(d).data("currency"),f=e+" "+numeral(c(d)).format(b);a(d).find(".ezfc-price").text(f)}),a(".ezfc-form").submit(function(b){var c=a(this);a(".ezfc-loading").show(),a(c).find("input[type='submit']").attr("disabled","disabled");var d=a(this).data("id"),e="id="+d+"&"+a(this).serialize();return a.ajax({type:"post",url:ezfc_ajaxurl,data:{action:"ezfc_frontend",data:e},success:function(b){if(a(".ezfc-loading").hide(),a(c).find("input[type='submit']").removeAttr("disabled"),b=a.parseJSON(b),!b)return a(c).find(".ezfc-message").text("Something went wrong. :("),"undefined"!=typeof Recaptcha&&Recaptcha.reload(),!1;if(b.error){if(b.id){for(var e=0;e<Opentip.tips.length;e++)Opentip.tips[e].hide();var f=a("#ezfc_element-"+b.id);f?a(f).opentip(b.error,{hideDelay:.1,hideTriggers:["closeButton","target"],removeElementsOnHide:!0,showOn:null,target:"#ezfc_element-"+b.id,tipJoint:"left"}).show():alarm(b.error)}else a(c).parents(".ezfc-wrapper").find(".ezfc-message").html("<p class='text-danger'>"+b.error+"</p>").fadeIn(),setTimeout(function(){a(c).find(".ezfc-message").fadeOut()},7500);return"undefined"!=typeof Recaptcha&&Recaptcha.reload(),!1}"undefined"!=typeof Recaptcha&&Recaptcha.reload(),a(".ezfc-form[data-id='"+d+"'], .ezfc-required-notification").fadeOut(),a(".ezfc-success-text[data-id='"+d+"']").fadeIn()}}),b.preventDefault(),!1})});